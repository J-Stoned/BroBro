# YouTube Transcript Extraction Guide

**Script**: `scripts/extract-yt-transcripts.py`
**Status**: ✅ Ready to Run
**Date**: 2025-10-29

---

## Overview

This script extracts YouTube transcripts from all configured sources in `kb/youtube-sources.json` and organizes them for the BroBro knowledge base.

---

## Features

### Extraction Capabilities

1. **Creator Channels** - Extract up to N videos from each creator
2. **Specific Videos** - Extract individual videos by URL
3. **Auto-Generated Transcripts** - Falls back to auto-generated if manual unavailable
4. **Metadata Preservation** - Saves video title, creator, topics, timestamps
5. **Rate Limiting** - 1 second delay between requests to avoid API limits
6. **Error Handling** - Graceful handling of missing transcripts
7. **Progress Tracking** - Real-time console output

### Output Organization

```
kb/youtube-transcripts/
├── by-creator/
│   ├── robb-bailey/
│   │   ├── VIDEO_ID_title.txt
│   │   └── ...
│   ├── jack-its-jack/
│   ├── highlevel-wizard/
│   ├── nick-ponte/
│   ├── jasper-highlevel/
│   └── ghl-boy/
├── by-topic/
│   ├── workflows/
│   ├── automation/
│   ├── tutorials/
│   └── ...
├── specific/
│   └── 2eX5rkO1g-Y_title.txt
└── index.json
```

---

## Usage

### Basic Extraction

```bash
cd "C:\Users\justi\BroBro"
python scripts/extract-yt-transcripts.py
```

### What It Does

1. **Loads Configuration** from `kb/youtube-sources.json`
2. **For Each Enabled Creator**:
   - Fetches up to `maxVideos` from their channel
   - Extracts English transcripts
   - Saves to `by-creator/[creator-name]/`
   - Also saves to `by-topic/[topic]/`
3. **For Each Specific Video**:
   - Extracts transcript
   - Saves to `specific/`
4. **Generates Index**: Creates `index.json` with all metadata

---

## Configuration (kb/youtube-sources.json)

### Creators Section

```json
{
  "name": "Creator Name",
  "channelId": "@channelhandle",
  "channelUrl": "https://www.youtube.com/@channelhandle",
  "maxVideos": 25,
  "topics": ["workflows", "automation"],
  "priority": "medium",
  "enabled": true
}
```

**enabled**: Set to `true` to include in extraction

### Specific Videos Section

```json
{
  "url": "https://www.youtube.com/watch?v=VIDEO_ID",
  "title": "Video Title",
  "creator": "Creator Name",
  "topics": ["workflows"],
  "priority": "high",
  "enabled": true
}
```

### Extraction Settings

```json
"extractionSettings": {
  "preferredTranscriptLanguage": "en",
  "includeTimestamps": true,
  "includeAutoGeneratedTranscripts": true,
  "minimumVideoDuration": 180,
  "maximumVideoDuration": 7200
}
```

---

## Expected Output

### Console Output

```
================================================================================
BroBro - YouTube Transcript Extraction
================================================================================
Config: kb/youtube-sources.json
Output: kb/youtube-transcripts

Enabled Creators: 8

Processing Creator: Robb Bailey
  Channel: @GoHighLevelwithRobbBailey
  Max Videos: 30
  Fetching videos from @GoHighLevelwithRobbBailey...
  Found 30 videos
  [1/30] GHL Workflow Automation Masterclass...
    ✓ Transcript extracted (15234 chars)
  [2/30] SaaS Mode Complete Setup Guide...
    ✓ Transcript extracted (12456 chars)
  ...

Processing Creator: Jack (It's Jack)
  Channel: @Itssssss_Jack
  ...

================================================================================
EXTRACTION COMPLETE
================================================================================
Total Videos Processed: 156
Successful Extractions: 142
Failed Extractions: 14
Total Transcripts: 142
Output Directory: kb/youtube-transcripts
```

### Generated Files

#### Transcript File Format

```
Title: GHL Workflow Automation Masterclass
Video ID: ABC123xyz
Creator: Robb Bailey
URL: https://www.youtube.com/watch?v=ABC123xyz
Topics: workflows, automation, best-practices

================================================================================

[0.00s] Welcome to this comprehensive guide on GHL workflow automation...
[15.43s] First, let's start with the basic workflow structure...
[32.87s] The key to effective automation is understanding triggers...
```

#### Index.json Format

```json
{
  "totalTranscripts": 142,
  "extractionDate": "2025-10-29T10:30:00",
  "stats": {
    "total_videos_processed": 156,
    "successful_extractions": 142,
    "failed_extractions": 14,
    "total_creators": 8
  },
  "transcripts": [
    {
      "videoId": "ABC123xyz",
      "title": "GHL Workflow Automation Masterclass",
      "creator": "Robb Bailey",
      "url": "https://www.youtube.com/watch?v=ABC123xyz",
      "topics": ["workflows", "automation"],
      "priority": "high",
      "extractedDate": "2025-10-29T10:25:00",
      "filepath_creator": "kb/youtube-transcripts/by-creator/robb-bailey/ABC123xyz_title.txt",
      "word_count": 2543,
      "char_count": 15234
    }
  ]
}
```

---

## Troubleshooting

### Common Issues

#### 1. "No transcript available"

**Cause**: Video has no transcript (manual or auto-generated)
**Solution**: Normal - some videos don't have transcripts. Script will skip and continue.

#### 2. "Rate limit exceeded"

**Cause**: Too many requests to YouTube
**Solution**: Script has 1-second delay built-in. If still occurring, increase `RATE_LIMIT_DELAY` in script.

#### 3. "Channel not found"

**Cause**: Invalid channel ID in configuration
**Solution**: Verify channel ID in youtube-sources.json matches actual channel handle

#### 4. "Import Error: youtube_transcript_api"

**Cause**: Dependencies not installed
**Solution**:
```bash
pip install youtube-transcript-api scrapetube
```

---

## Performance Estimates

### Single Creator (25 videos)

- **Fetch videos**: ~5 seconds
- **Extract transcripts**: ~25 seconds (1s per video)
- **Save files**: ~5 seconds
- **Total**: ~35 seconds per creator

### All 8 Creators (201 videos estimated)

- **Total time**: ~4-5 minutes
- **Success rate**: 85-90% (some videos lack transcripts)
- **Expected transcripts**: ~170-180 videos

### File Sizes

- **Single transcript**: 5-50 KB
- **Total transcripts**: ~2-5 MB
- **Index.json**: ~500 KB

---

## Next Steps After Extraction

### 1. Verify Extraction

```bash
# Check index
cat kb/youtube-transcripts/index.json

# Count transcripts
find kb/youtube-transcripts -name "*.txt" | wc -l

# Check specific creator
ls kb/youtube-transcripts/by-creator/robb-bailey/
```

### 2. Create Embeddings

```bash
# Run embedding script (to be created)
python scripts/embed-yt-transcripts.py
```

### 3. Index in ChromaDB

```bash
# Add to ghl-tutorials collection
python scripts/index-transcripts-chromadb.py
```

### 4. Test Search

```bash
# Search across commands + transcripts
python .claude/commands/cli/ghl-cli.py search "workflow automation"
```

---

## Extraction Statistics (After Run)

Check `kb/youtube-transcripts/index.json` for:

- Total transcripts extracted
- Success/failure counts
- Per-creator breakdown
- Total word count
- Total characters

---

## Maintenance

### Weekly

- Run extraction for new videos from creators
- Update index.json
- Re-generate embeddings for new content

### Monthly

- Review failed extractions
- Add new high-value creators
- Remove inactive/low-quality sources

### Quarterly

- Full re-extraction to catch transcript updates
- Validate transcript quality
- Clean up duplicate content

---

## Integration with BroBro

### Current State

```
BroBro Knowledge Base
├── ghl-commands (275 items) ✅ Indexed in ChromaDB
└── ghl-tutorials (0 items) ⏭️ Pending extraction
```

### After Extraction

```
BroBro Knowledge Base
├── ghl-commands (275 items) ✅ Indexed in ChromaDB
└── ghl-tutorials (170+ items) ✅ Extracted, pending indexing
```

### After ChromaDB Indexing

```
BroBro Knowledge Base
├── ghl-commands (275 items) ✅ Indexed, searchable
└── ghl-tutorials (170+ items) ✅ Indexed, searchable
```

**Total KB**: 445+ items across 2 collections

---

## Script Features

### Error Handling

- ✅ Graceful handling of missing transcripts
- ✅ Continue processing on errors
- ✅ Log all errors to stats
- ✅ Detailed error messages

### Rate Limiting

- ✅ 1-second delay between requests
- ✅ Prevents API throttling
- ✅ Configurable delay

### Progress Tracking

- ✅ Real-time console output
- ✅ Per-video status (✓ or ✗)
- ✅ Progress counter ([1/30])
- ✅ Character count per transcript

### Metadata Preservation

- ✅ Video title, ID, URL
- ✅ Creator name, channel ID
- ✅ Topics, priority
- ✅ Extraction date
- ✅ Word/character counts

---

## Advanced Usage

### Extract Only Specific Creator

Edit `kb/youtube-sources.json`:
- Set `enabled: false` for creators to skip
- Set `enabled: true` only for desired creator
- Run extraction

### Limit Videos Per Creator

Edit `maxVideos` in youtube-sources.json:
```json
"maxVideos": 10  // Only get 10 latest videos
```

### Change Rate Limit

Edit `scripts/extract-yt-transcripts.py`:
```python
RATE_LIMIT_DELAY = 2.0  // 2 seconds between requests
```

---

## Expected Timeline

1. **Extraction** - 4-5 minutes (for 201 videos)
2. **Review Output** - 2-3 minutes
3. **Create Embeddings** - 10-15 minutes
4. **Index in ChromaDB** - 5-10 minutes
5. **Test Search** - 2-3 minutes

**Total**: ~25-35 minutes for complete pipeline

---

**Status**: Script ready to run
**Command**: `python scripts/extract-yt-transcripts.py`
**Next**: Monitor extraction progress, then create embedding script
